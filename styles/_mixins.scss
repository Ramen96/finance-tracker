@use "@/styles/variables" as vars;

// ========================================
// Dimension Helpers
// ========================================

@mixin size($width, $height: $width) {
  width: $width;
  height: $height;
}

@mixin h-custom($h) { height: $h; }
@mixin h-full { height: 100%; }
@mixin h-auto { height: auto; }
@mixin h-100vh { height: 100vh; }
@mixin w-full { width: 100%; }
@mixin w-100vw { width: 100vw; }

// ========================================
// Flexbox Helpers
// ========================================

@mixin flex($justify: null, $align: null, $direction: null) {
  display: flex;
  @if $justify { justify-content: $justify; }
  @if $align { align-items: $align; }
  @if $direction { flex-direction: $direction; }
}

@mixin flex-center { @include flex(center, center); }
@mixin flex-center-v { @include flex(center); }
@mixin flex-center-h { @include flex(null, center); }
@mixin flex-wrap { flex-wrap: wrap; }

@mixin label-row($font-family: null, $font-size: null, $font-weight: null) {
  @include flex(space-around, center);
  width: 100%;
  gap: 1.5rem;
  @if $font-family { font-family: $font-family; }
  @if $font-size { font-size: $font-size; }
  @if $font-weight { font-weight: $font-weight; }
}

@mixin label-row-primary {
  @include label-row(var(--font-display));
  letter-spacing: 0.15rem;
  text-transform: uppercase;
}

@mixin label-row-secondary {
  @include label-row(null, medium, 200);
}

// ========================================
// Styling Helpers
// ========================================

@mixin radius($size: vars.$radius) { border-radius: $size; }
@mixin radius-sm { @include radius(vars.$radius-sm); }
@mixin pointer { cursor: pointer; }
@mixin no-select { user-select: none; }
@mixin no-outline { outline: none; }

@mixin interactive {
  @include no-outline;
  @include no-select;
  @include pointer;
}

// ========================================
// Positioning Helpers
// ========================================

@mixin position($type, $top: null, $right: null, $bottom: null, $left: null) {
  position: $type;
  @if $top { top: $top; }
  @if $right { right: $right; }
  @if $bottom { bottom: $bottom; }
  @if $left { left: $left; }
}

@mixin fixed-top-right($top: vars.$spacing-md, $right: vars.$spacing-md) {
  @include position(fixed, $top, $right);
}

@mixin fixed-top-left($top: vars.$spacing-md, $left: vars.$spacing-md) {
  @include position(fixed, $top, null, null, $left);
}

@mixin absolute-center {
  @include position(absolute, 50%, null, null, 50%);
  transform: translate(-50%, -50%);
}

@mixin absolute-bottom-left {
  @include position(absolute, null, null, 0, 0);
}

@mixin relative { position: relative; }

// ========================================
// Text Alignment
// ========================================

@mixin text-align($align) { text-align: $align; }
@mixin text-center { @include text-align(center); }
@mixin text-left { @include text-align(left); }
@mixin text-right { @include text-align(right); }

// ========================================
// Transitions & Effects
// ========================================

@mixin transition($property: all) {
  transition: $property var(--transition);
}

// ========================================
// Shadows
// ========================================

@mixin shadow($size: null, $color: null) {
  @if $size == null {
    box-shadow: var(--shadow);
  } @else if $size == sm {
    box-shadow: var(--shadow-sm);
  } @else if $size == md {
    box-shadow: var(--shadow-md);
  } @else if $size == lg {
    box-shadow: var(--shadow-lg);
  } @else if $color {
    box-shadow: vars.$icon-size vars.$icon-size 0 $color;
  }
}

@mixin shadow-sm { @include shadow(sm); }
@mixin shadow-md { @include shadow(md); }
@mixin shadow-lg { @include shadow(lg); }
@mixin shadow-primary { @include shadow(null, var(--primary-light-inverse, var(--primary-light))); }
@mixin shadow-primary-light { @include shadow(null, var(--primary-light)); }
@mixin shadow-primary-inverse { @include shadow(null, var(--text-inverse)); }

// ========================================
// Borders
// ========================================

@mixin border($width: 1px, $color: var(--border)) {
  border: $width solid $color;
}

@mixin border-primary($width: 0.2rem) {
  @include border($width, var(--primary));
}

// ========================================
// Spacing Helpers
// ========================================

@mixin p($size) { padding: $size; }
@mixin m($size) { margin: $size; }
@mixin mr-05rem { margin-right: vars.$spacing-md; }

// ========================================
// Visibility
// ========================================

@mixin hidden {
  height: 0;
  width: 0;
  visibility: hidden;
}

@mixin sr-only {
  @include position(absolute, null, null, null, -9999px);
  @include size(1px);
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

// ========================================
// Media Query Helpers
// ========================================

@mixin respond($breakpoint) {
  @if $breakpoint == md {
    @media (min-width: 768px) { @content; }
  } @else if $breakpoint == lg {
    @media (min-width: 1024px) { @content; }
  }
}

// ========================================
// Button Mixins
// ========================================

@mixin btn-base {
  @include radius;
  @include transition;
  @include pointer;
  font-family: var(--font-display), sans-serif;
  font-size: vars.$font-size-md;
  border: none;
}

@mixin btnPrimary {
  @include btn-base;
  @include m(vars.$spacing-sm);
  @include shadow-primary;
  border: 1px solid var(--primary-light-inverse, var(--primary-light));
  color: var(--primary-light);
  background: var(--primary);
  padding: vars.$spacing-sm 1rem;
  
  &:hover {
    background: var(--primary-hover);
    transform: scale(1.03);
  }
}

@mixin btnSecondary {
  @include btn-base;
  @include shadow-primary;
  @include m(vars.$spacing-sm);
  color: var(--secondary-text);
  background: var(--secondary);
  padding: vars.$spacing-xs 1rem;
  
  &:hover {
    background: var(--secondary-hover);
  }
}

@mixin btnTertiary {
  @include btn-base;
  @include shadow-primary-inverse;
  @include m(vars.$spacing-sm);
  border: 1px solid var(--border);
  color: var(--tertiary-text);
  background: var(--bg-elevated);
  padding: 0.35rem 0.9rem;
  
  &:hover {
    background: var(--tertiary-hover);
  }
}

// ========================================
// Text Inputs
// ========================================

@mixin textInputPrimary {
  @include radius;
  @include no-outline;
  @include m(vars.$spacing-lg);
  @include size(vars.$input-width, vars.$input-height);
  box-shadow: vars.$icon-size vars.$icon-size 0 var(--text-input-shadow);
  padding: vars.$spacing-xs 0.5rem;
  color: var(--text-input-text);
  border: 1px solid var(--primary-light-inverse);
  font-family: var(--font-main);
  letter-spacing: vars.$letter-spacing;
  font-size: vars.$font-size-large;
  background: var(--text-input-bg);
  caret-shape: block;
  
  &::placeholder {
    @include text-center;
    color: var(--text-input-text);
  }
}

// ========================================
// Password Input
// ========================================

@mixin passwdWrapper { position: relative; }

@mixin eyeBtn {
  @include flex-center;
  @include position(absolute, 50%, vars.$eye-btn-distance);
  @include radius-sm;
  @include no-outline;
  @include pointer;
  border: none;
  color: var(--text-input-text);
  background: transparent;
  transform: translateY(-50%);
  z-index: 100;
}

// ========================================
// Checkbox
// ========================================

@mixin checkbox {
  @include radius;
  @include size(vars.$checkbox-size);
  font-family: var(--font-display), sans-serif;
  letter-spacing: vars.$letter-spacing;
  font-size: 1rem;
  color: var(--primary-light);
  background: #333;
  
  &:checked {
    background: #0a5fdf;
  }
}

@mixin checkboxInput {
  @include position(absolute, null, null, null, -9999px);
  @include size(1px);
  opacity: 0;
  overflow: hidden;
}

// ========================================
// Containers
// ========================================

@mixin mainContainer {
  @include position(absolute, 0, null, null, 0);
  @include h-full;
  @include w-full;
  display: flex;
}

@mixin contentContainer {
  @include size(100%);
  @include flex(center);
  flex-wrap: wrap;
  align-content: flex-start;
}

// ========================================
// Cards
// ========================================

@mixin card-base($padding: vars.$spacing-xl, $margin: vars.$spacing-xl) {
  @include radius;
  width: fit-content;
  height: fit-content;
  margin: $margin;
  padding: $padding;
  display: flex;
}

@mixin card {
  @include card-base;
  @include shadow-lg;
  background: var(--bg-elevated);
  letter-spacing: 0.25rem;
  min-width: vars.$card-width;
  flex-wrap: wrap;
}

@mixin card-item {
  @include card-base;
  @include shadow-md;
  @include border;
  background: var(--bg-tertiary);
  flex-direction: row;
}

// ========================================
// Navigation
// ========================================

@mixin nav {
  @include radius;
  @include w-full;
  @include flex-center;
  margin: vars.$spacing-md;
  height: 1rem;
  padding: vars.$spacing-2xl;
}

// ========================================
// Grid & Table Helpers
// ========================================

@mixin grid($columns, $gap: vars.$spacing-md) {
  display: grid;
  grid-template-columns: $columns;
  gap: $gap;
}

@mixin grid-two-col($col1: 1fr, $col2: 0.8fr, $gap: vars.$spacing-md) {
  @include grid($col1 $col2, $gap);
}

@mixin table-base($columns, $gap: vars.$spacing-md, $padding: vars.$spacing-md) {
  @include grid($columns, $gap);
  @include p($padding);
  @include radius;
}

@mixin table-header($columns: 1fr 0.8fr, $gap: vars.$spacing-md) {
  @include table-base($columns, $gap);
  background: var(--bg-secondary);
  font-weight: 600;
  font-family: var(--font-display), sans-serif;
  color: var(--text);
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05rem;
}

@mixin table-row($columns: 1fr 0.8fr, $gap: vars.$spacing-md) {
  @include table-base($columns, $gap);
  @include border;
  @include transition;
  background: var(--bg-tertiary);
  
  &:hover {
    background: var(--bg-elevated);
    border-color: var(--primary);
    @include shadow-sm;
  }
}

@mixin table-header-assets {
  @include table-header(2fr 1fr 1fr 0.8fr);
}

@mixin table-row-assets {
  @include table-row(2fr 1fr 1fr 0.8fr);
  align-items: center;
}

@mixin table-header-liabilities {
  @include table-header(1.2fr 1fr 0.8fr 0.6fr 0.9fr, vars.$spacing-xs);
  @include p(vars.$spacing-sm vars.$spacing-md);
}

@mixin table-row-liabilities {
  @include table-row(1.2fr 1fr 0.8fr 0.6fr 0.9fr, vars.$spacing-xs);
  @include p(vars.$spacing-sm vars.$spacing-md);
  align-items: center;
}

// ========================================
// Section Headers
// ========================================

@mixin section-header($border-width: 2px) {
  @include flex(null, center);
  gap: vars.$spacing-md;
  padding-bottom: vars.$spacing-md;
  border-bottom: $border-width solid var(--border);
  
  h2 {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text);
    margin: 0;
  }
}

@mixin section-icon {
  @include flex-center;
  color: var(--primary);
  flex-shrink: 0;
}

// ========================================
// Page Headers
// ========================================

@mixin page-header {
  @include w-full;
  @include flex(null, null, column);
  gap: vars.$spacing-sm;
  margin-bottom: vars.$spacing-lg;

  h1 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text);
    margin: 0;
  }

  p {
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin: 0;
  }
}

// ========================================
// Category/Card Sections
// ========================================

@mixin category-card {
  @include card;
  @include shadow-primary;
  @include p(vars.$spacing-lg);
  @include flex(null, null, column);
  gap: vars.$spacing-md;
  min-width: 280px;
  max-width: 420px;
  margin: 0;

  @media (max-width: 768px) {
    @include w-full;
    max-width: none;
  }
}

// ========================================
// Total Display Sections
// ========================================

@mixin category-total {
  @include grid-two-col(1fr, 0.8fr, vars.$spacing-lg);
  @include p(vars.$spacing-lg);
  @include radius;
  font-family: var(--font-display);
  background: var(--primary);
  margin-top: vars.$spacing-sm;
  font-weight: 700;

  .totalLabel {
    color: var(--primary-text);
    @include text-left;
  }

  .totalAmount {
    color: var(--primary-text);
    @include text-right;
    font-size: 1.15rem;
  }
}

@mixin grand-total {
  @include flex-center;
  @include p(vars.$spacing-lg vars.$spacing-md);
  @include radius;
  @include border(2px, var(--primary));
  @include w-full;
  background: var(--bg-secondary);
  margin-top: vars.$spacing-lg;
  box-sizing: border-box;
}

@mixin grand-total-content {
  @include flex(null, center, column);
  gap: vars.$spacing-md;

  h2 {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text);
    margin: 0;
  }
}

@mixin grand-total-amount($color: var(--success)) {
  font-size: 2.5rem;
  font-weight: 800;
  color: $color;
  letter-spacing: 0.05rem;
}

// ========================================
// Container Layouts
// ========================================

@mixin page-container($max-width: 1400px) {
  @include w-full;
  @include flex-center;
  font-family: var(--font-display), sans-serif;
  flex-direction: column;
  padding: vars.$spacing-xl;
  gap: vars.$spacing-2xl;
  overflow-y: auto;
  overflow-x: hidden;
  max-width: $max-width;
  margin: 0 auto;
}

@mixin responsive-grid($gap: vars.$spacing-lg) {
  @include w-full;
  display: flex;
  flex-wrap: wrap;
  gap: $gap;
}

// ========================================
// Table Components
// ========================================

@mixin data-table {
  @include w-full;
  @include flex(null, null, column);
  gap: vars.$spacing-sm;
  font-family: var(--font-main), sans-serif;
}

@mixin table-body {
  @include w-full;
  @include flex(null, null, column);
  gap: vars.$spacing-sm;
}

// ========================================
// Action Buttons (Edit/Delete)
// ========================================

@mixin action-btn($bg, $hover-bg, $color: white) {
  @include flex-center;
  @include radius-sm;
  @include transition;
  @include pointer;
  padding: vars.$spacing-xs;
  background: $bg;
  color: $color;
  border: none;

  &:hover {
    background: $hover-bg;
    transform: scale(1.1);
  }
}

@mixin action-btn-edit {
  @include action-btn(var(--primary), var(--primary-hover), var(--primary-text));
}

@mixin action-btn-delete {
  @include action-btn(var(--error, #ef4444), var(--error-hover, #dc2626));
}

// ========================================
// Column Text Styling
// ========================================

@mixin column-text($align, $color, $weight, $size: null) {
  @include text-align($align);
  color: $color;
  font-weight: $weight;
  @if $size { font-size: $size; }
}

@mixin column-name {
  @include column-text(left, var(--text), 500);
}

@mixin column-value {
  @include column-text(right, var(--text), 600, 1.05rem);
}

@mixin column-success {
  @include column-text(right, var(--success), 600);
}

@mixin column-error {
  @include column-text(right, var(--error, #ef4444), 600, 1.05rem);
}

@mixin column-secondary {
  @include column-text(right, var(--text-secondary), 500, 0.95rem);
}

// ========================================
// Amount Display Styling
// ========================================

@mixin amount-display-value($font-size: 1.4rem) {
  font-family: var(--font-display), sans-serif;
  font-size: $font-size;
  font-weight: 700;
  color: var(--text);
}